var tableHeaderData=["姓名","语文","数学","英语","总分"];var tableData=[["小明",80,90,70],["小红",90,60,90],["小亮",60,100,70]];var sortFlag=[true,true,true,true,true];function buildTableHeader(e){var d=document.getElementById("myTable");var a=document.createElement("tr");var c=new Array();for(var b=0;b<e.length;b++){c[b]=document.createElement("th");if(b>0){c[b].className="sortBtn";c[b].id="flag"+b}c[b].appendChild(document.createTextNode(e[b]));a.appendChild(c[b]);switch(b){case 0:break;case 1:c[b].id="chineseScore";c[b].onclick=function(){sortTable(1);buildTable(tableData)};break;case 2:c[b].id="mathScore";c[b].onclick=function(){sortTable(2);buildTable(tableData)};break;case 3:c[b].id="englishScore";c[b].onclick=function(){sortTable(3);buildTable(tableData)};break;case 4:c[b].id="totalScore";c[b].onclick=function(){sortTable(4);buildTable(tableData)};break;default:break}}d.appendChild(a)}function sortTable(a){function b(d,c){if(sortFlag[a]==true){return d[a]-c[a]}else{return c[a]-d[a]}}sortFlag[a]=!sortFlag[a];tableData.sort(b);return tableData}function getTotal(e){for(var d=0;d<e.length;d++){var b=0;for(var c=1;c<e[d].length;c++){b+=e[d][c]}var a=e[d].length;e[d][a]=b}return e}function buildTable(g){var k=document.getElementById("myTable");var h=k.childNodes;for(var b=h.length-1;b>1;b--){k.removeChild(h[b])}var d=new Array();var f=new Array();for(var e=0;e<g.length;e++){d[e]=document.createElement("tr");f[e]=new Array();for(var c=0;c<g[e].length;c++){f[e][c]=document.createElement("td");f[e][c].appendChild(document.createTextNode(g[e][c]));d[e].appendChild(f[e][c])}k.appendChild(d[e])}}window.onload=function(){buildTableHeader(tableHeaderData);getTotal(tableData);buildTable(tableData)};