window.onload=function(){waterfall("main","pin");var a={data:[{src:"1.jpg"},{src:"2.jpg"},{src:"3.jpg"},{src:"4.jpg"}]};window.onscroll=function(){if(checkscrollside()){var e=document.getElementById("main");for(var b=0;b<a.data.length;b++){var d=document.createElement("div");d.className="pin";e.appendChild(d);var f=document.createElement("div");f.className="box";d.appendChild(f);var c=document.createElement("img");c.src="./images/"+a.data[b].src;f.appendChild(c)}waterfall("main","pin")}}};function waterfall(k,a){var b=document.getElementById(k);var h=getClassObj(b,a);var j=h[0].offsetWidth;var g=Math.floor(document.documentElement.clientWidth/j);b.style.cssText="width:"+j*g+"px;ma rgin:0 auto;";var c=[];for(var f=0;f<h.length;f++){var d=h[f].offsetHeight;if(f<g){c[f]=d}else{var l=Math.min.apply(null,c);var e=getminHIndex(c,l);h[f].style.position="absolute";h[f].style.top=l+"px";h[f].style.left=h[e].offsetLeft+"px";c[e]+=h[f].offsetHeight}}}function getClassObj(c,b){var e=c.getElementsByTagName("*");var d=[];for(var a=0;a<e.length;a++){if(e[a].className==b){d.push(e[a])}}return d}function getminHIndex(a,c){for(var b in a){if(a[b]==c){return b}}}function checkscrollside(){var e=document.getElementById("main");var b=getClassObj(e,"pin");var c=b[b.length-1].offsetTop+Math.floor(b[b.length-1].offsetHeight/2);var d=document.documentElement.scrollTop||document.body.scrollTop;var a=document.documentElement.clientHeight;return(c<d+a)?true:false};